<!DOCTYPE html>
<html>
  <head>
    <title>Leaflet GeoJSON Example</title>
    <meta charset="utf-8" />
    <link
      rel="stylesheet"
      href="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.css"
    />
    <style type="text/css">
      .leaflet-container {
        background-color: #c5e8ff;
      }
    </style>
  </head>

  <body>
    <div id="map" style="width: 600px; height: 400px"></div>

    <script src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.7.1/leaflet.js"></script>
    <script>
      var myGeoJSONPath = "custom.geo1.json";
      var myCustomStyle = {
        stroke: true,
        color: "#000",
        weight: 1,
        fill: true,
        fillColor: "#fff",
        fillOpacity: 1,
      };
      $.getJSON(myGeoJSONPath, function (data) {
        var map = L.map("map").setView([54.526, 15.2551], 4);

        // Load deaths data from JSON file
        $.getJSON("covid_deaths.json", function (deathsData) {
          L.geoJson(data, {
            clickable: true,
            style: myCustomStyle,
            onEachFeature: function (feature, layer) {
              layer.on("click", function (e) {
                // Find the country in the deaths data
                var countryData = deathsData.find(function (country) {
                  return country.Country === feature.properties.name;
                });
                if (countryData) {
                  // Show the number of deaths in a popup
                  var deaths = countryData["Total Deaths"];
                  L.popup()
                    .setLatLng(e.latlng)
                    .setContent(
                      feature.properties.name + "<br>" + "Deaths: " + deaths
                    )
                    .openOn(map);
                }
              });
            },
          }).addTo(map);
        });
      });
    </script>
  </body>
</html>
